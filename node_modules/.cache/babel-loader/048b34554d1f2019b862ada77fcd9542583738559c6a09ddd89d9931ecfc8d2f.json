{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/project-ges/app/javascript/components/profile/ImageUploadModal.tsx\";\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport React, { useState } from 'react';\nimport Button from '@mui/material/Button';\nimport Modal from '@mui/material/Modal';\nimport { Formik } from 'formik';\nimport Banner from '../shared/Banner';\nimport { Box } from '@mui/material';\nimport FileUploadForm from '../forms/ImageUploadForm';\nimport { useMutation } from '@apollo/client';\nimport { UPLOAD_IMAGE } from '../api/mutations';\nvar initialValue = {\n  image: ''\n};\nvar style = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: 400,\n  bgcolor: 'background.paper',\n  border: '3px solid #5bbff1',\n  borderRadius: '5px',\n  boxShadow: 24,\n  p: 4\n};\nexport default function ImageUploadModal() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    open = _useState2[0],\n    setOpen = _useState2[1];\n  var handleOpen = function handleOpen() {\n    return setOpen(true);\n  };\n  var handleClose = function handleClose() {\n    return setOpen(false);\n  };\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    message = _useState4[0],\n    setMessage = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    severity = _useState6[0],\n    setSeverity = _useState6[1];\n  var _useMutation = useMutation(UPLOAD_IMAGE, {\n      onCompleted: function onCompleted(data) {\n        if (!!data) {\n          setSeverity('success');\n          setMessage('Account was created successfully, a confirmation link was sent to your email');\n        }\n      },\n      onError: function onError() {\n        setSeverity('error');\n        setMessage('Sorry, account creation was unsuccessful');\n      }\n    }),\n    _useMutation2 = _slicedToArray(_useMutation, 2),\n    uploadImage = _useMutation2[0],\n    loading = _useMutation2[1].loading;\n  var handleSubmit = function handleSubmit(event) {\n    var formData = new FormData();\n    formData.append('image', event);\n    console.log(formData);\n    console.log(event);\n    uploadImage({\n      variables: {\n        image: formData\n      }\n    });\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleOpen,\n    sx: {\n      margin: '40px 0 0 25px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \"Upload Avatar\"), /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"modal-modal-title\",\n    \"aria-describedby\": \"modal-modal-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, message && /*#__PURE__*/React.createElement(Banner, {\n    severity: severity,\n    message: message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(Formik, {\n    onSubmit: handleSubmit,\n    initialValues: initialValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FileUploadForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  })))));\n}","map":{"version":3,"names":["React","useState","Button","Modal","Formik","Banner","Box","FileUploadForm","useMutation","UPLOAD_IMAGE","initialValue","image","style","position","top","left","transform","width","bgcolor","border","borderRadius","boxShadow","p","ImageUploadModal","_useState","_useState2","_slicedToArray","open","setOpen","handleOpen","handleClose","_useState3","_useState4","message","setMessage","_useState5","_useState6","severity","setSeverity","_useMutation","onCompleted","data","onError","_useMutation2","uploadImage","loading","handleSubmit","event","formData","FormData","append","console","log","variables","createElement","Fragment","onClick","sx","margin","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClose","onSubmit","initialValues"],"sources":["/Users/admin/Desktop/project-ges/app/javascript/components/profile/ImageUploadModal.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport Button from '@mui/material/Button'\nimport Modal from '@mui/material/Modal'\nimport { Formik } from 'formik'\nimport Banner from '../shared/Banner'\nimport { Box } from '@mui/material'\nimport FileUploadForm from '../forms/ImageUploadForm'\nimport { useMutation } from '@apollo/client'\nimport { UPLOAD_IMAGE } from '../api/mutations'\n\n\nconst initialValue = {\n  image: '',\n}\n\ninterface ImageProps {\n  image: string\n}\n\nconst style = {\n  position: 'absolute' as 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: 400,\n  bgcolor: 'background.paper',\n  border: '3px solid #5bbff1',\n  borderRadius: '5px',\n  boxShadow: 24,\n  p: 4,\n};\n\nexport default function ImageUploadModal(): JSX.Element {\n  const [open, setOpen] = useState(false)\n  const handleOpen = () => setOpen(true)\n  const handleClose = () => setOpen(false)\n  const [message, setMessage] = useState('')\n  const [severity, setSeverity] = useState(null)\n\n  const [uploadImage, { loading }] = useMutation(UPLOAD_IMAGE, {\n    onCompleted: (data) => {\n      if (!!data) {\n        setSeverity('success')\n        setMessage('Account was created successfully, a confirmation link was sent to your email')\n      }\n    },\n    onError: () => {\n      setSeverity('error')\n      setMessage('Sorry, account creation was unsuccessful')\n    }\n  })\n\n  const handleSubmit = (event) => {\n    const formData = new FormData()\n    formData.append('image', event)\n\n    console.log(formData)\n    console.log(event)\n    uploadImage({\n      variables: {\n        image: formData\n      }\n    })\n  }\n\n  return (\n    <>\n      <Button\n        onClick={handleOpen}\n        sx={{ margin: '40px 0 0 25px' }}\n      >\n        Upload Avatar\n      </Button>\n      <Modal\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\"\n      >\n        <Box sx={style}>\n          {message && <Banner severity={severity} message={message} />}\n          <Formik\n            onSubmit={handleSubmit}\n            initialValues={initialValue}\n          >\n            <FileUploadForm />\n          </Formik>\n        </Box>\n      </Modal>\n    </>\n  )\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}